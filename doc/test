- 基本テスト内容

★(1) el-discover
- OpenECHO を立ち上げて、el-discover で検索を試みる。
  Multicast通信および基本的なECHONET Liteプロトコル解釈機能が確認できる
---------------------------------------------------------------
[root@centos6 el-discover]# ./el_discover 00 11 01
[SEND]: len=14
00000000  10 81 01 00 0E F0 01 0E-F0 01 63 01 D5 00         ..........c...
[RECV]: 10.1.11.102:3610:rlen/len=14/32768
00000000  10 81 01 00 0E F0 01 0E-F0 01 63 01 D5 00         ..........c...
2013/01/30T13:55:55 MLS:WARN:mls_elnet_rpc@809: _unmarshal_frame_response(-1), i\
gnore message
[RECV]: 10.1.11.104:3610:rlen/len=18/32768
00000000  10 81 01 00 0E F0 01 0E-F0 01 73 01 D5 04 01 00   ..........s.....
00000010  11 01                                             ..
10.1.11.104:3610,00,11,01
<<<★成功 10.1.11.102(VM上)で実行してMac上のOpenECHOから返答をもらった。
---------------------------------------------------------------

★(2) el-prop
- OpenECHO を立ち上げて、el-prop で検索を試みる。
  Multicast通信および基本的なECHONET Liteプロトコル解釈機能が確認できる
  * ここで short, int などのデータ型を送受信し、ORDERが大丈夫である事を確認
---------------------------------------------------------------
[root@centos6 el-prop]# ./el_prop -s 10.1.11.104:3610 00 11 01 80 31
[SEND]: len=15
00000000  10 81 01 00 0E F0 01 00-11 01 61 01 80 01 31      ..........a...1
[RECV]: 10.1.11.104:3610:rlen/len=15/32768
00000000  10 81 00 01 00 11 01 0E-F0 01 73 01 80 01 31      ..........s...1
2013/02/02T06:44:41 MLS:WARN:mls_elnet_rpc@830: _unmarshal_frame_response(-1), i\
gnore message
[RECV]: 10.1.11.104:3610:rlen/len=14/32768
00000000  10 81 01 00 00 11 01 0E-F0 01 71 01 80 00         ..........q...
80,31
<<<★成功 書き込みが成功。動作状態は状態変更時にアナウンスがあるのでそれも受信している(無視)
[root@centos6 el-prop]# ./el_prop -g 10.1.11.104:3610 00 11 01 80 
[SEND]: len=14
00000000  10 81 01 00 0E F0 01 00-11 01 62 01 80 00         ..........b...
[RECV]: 10.1.11.104:3610:rlen/len=15/32768
00000000  10 81 01 00 00 11 01 0E-F0 01 72 01 80 01 31      ..........r...1
80,31
<<<★成功 値を取得している。

[root@centos6 el-prop]# ./el_prop -g 10.1.11.104:3610 0e f0 01 11
[SEND]: len=14
00000000  10 81 01 00 0E F0 01 0E-F0 01 62 01 11 00         ..........b...
[RECV]: 10.1.11.104:3610:rlen/len=14/32768
00000000  10 81 01 00 0E F0 01 0E-F0 01 52 01 11 00         ..........R...
Error response code (52)
[root@centos6 el-prop]# echo $?
245
<<<★成功 読み込みエラー時に終了ステータスが0以外
[root@centos6 el-prop]# ./el_prop -s 10.1.11.104:3610 0e f0 01 80 10
[SEND]: len=15
00000000  10 81 01 00 0E F0 01 0E-F0 01 61 01 80 01 10      ..........a....
[RECV]: 10.1.11.104:3610:rlen/len=15/32768
00000000  10 81 01 00 0E F0 01 0E-F0 01 51 01 80 01 10      ..........Q....
Error response code (51)
[root@centos6 el-prop]# echo $?
245
<<<★成功 書き込みエラー時に終了ステータスが0以外
---------------------------------------------------------------

★(3) temp_sensor
- 立ち上げ
- 立ち下げ (ローカルコマンド)
- OpenECHO を立ち上げて、OpenECHO からの送受信を試みる
  Multicast通信およびホスト側のECHONET Liteプロトコル解釈機能が確認できる
  プロパティデータの取り扱いが正しい事が確認できる。
  -- GET
  -- SET
  -- INF
---------------------------------------------------------------
結果省略, OK.
---------------------------------------------------------------

★(4) dev-config (& temp_sensor)
- temp_sensor に対してデータの参照、更新をおこなう
  operation 機能が確認できる
  プロパティデータの取り扱いが正しい事が確認できる。
  -- GET
  -- SET
---------------------------------------------------------------
[root@centos6 dev-config]# ./dev_config -g 00 11 01 80
0:0,11,1:80,dummy
[SEND]: len=7
00000000  01 00 00 11 01 80 00                              .......
[RECV]: len=8,
00000000  02 00 00 11 01 80 01 31-                          .......1
80,31
<<<★成功 値を取得している。
[root@centos6 dev-config]# ./dev_config -g 00 11 01 e0
0:0,11,1:e0,dummy
[SEND]: len=7
00000000  01 00 00 11 01 E0 00                              .......
[RECV]: len=9,
00000000  02 00 00 11 01 E0 02 00-CC                        .........
e0,00cc
<<<★成功 値を取得している。
[root@centos6 dev-config]# ./dev_config -s 00 11 01 e0 0101
[SEND]: len=9
00000000  11 00 00 11 01 E0 02 01-01                        .........
[RECV]: len=7,
00000000  12 00 00 11 01 E0 00                              .......
e0,0101
<<<★成功 書き込みが成功。
---------------------------------------------------------------

★(5) 総合
- temp_sensor に対して el-discover で検索をおこなう
- temp_sensor に対して el-prop でデータ取得・更新をおこなう
- temp_sensor に対して dev-config でデータ取得・更新をおこなう(4 参照)
---------------------------------------------------------------
結果省略, OK.
---------------------------------------------------------------

===============================================================
- メモ

コアダンプ
-> ulimit -S -c unlimited 
